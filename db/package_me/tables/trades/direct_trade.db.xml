<?xml version="1.0"?>
<!--
	[dbo].[direct_trade]
	Contains direct trade commision records.
-->
<table name="direct_trade">
	<columns>
		<col name="id" type="long" required="true" default="id()" unique="true"/>
		<col name="trade_id" type="int" id="true" business_id="true" identity_seed="200"/>
		<col name="tran_type" length="18" ref="trans_type" required="true"/>
		<col name="origin" type="enum" check="[0..1]"/>
		<col name="account_num" length="20"	required="true"/>
		<col ref="source_firms"/>
		<col name="source_firm_code" function="getSourceFirmCode" args="source_firm_id"/>

		<col name="batch_id" length="20" index="true"/>
		<col name="load_id" type="int" index="true"/>

		<col name="rep_id" length="10" required="true"/>
		<col name="off_id" length="10"/>
		<col name="div_id" length="10"/>

		<col name="prod_id" type="int" ref="product" required="true"/>
		<col name="policy_no" length="20"/>
		<col name="policy_date" type="datetime"/>
		<col name="state_of_sale" type="us_state" required="true"/>
		<col name="trade_date" type="datetime" required="true"/>
		<col name="settle_date" type="datetime"/>

		<col name="price" type="money"/>
		<col name="quantity" type="money"/>
		<col name="principal" type="money"/>
		<col name="bank_rate" type="rate"/>
		<col name="rep_rate" type="rate"/>
		<col name="expected_bank_comm" type="money"/>
		<col name="expected_rep_comm" type="money"/>
		<col name="bank_comm" type="money"/>
		<col name="rep_comm" type="money"/>

		<col name="outside_money" type="money"/>
		<col name="account_aum" type="money"/>
		<col name="aum_amount" type="money"/>
		<col name="householdId" ref="households"/>
		<col name="household_aum" type="money"/>
		<col name="roaloi_amount" type="money"/>
		<col name="roaloi_date" type="datetime"/>
		<col name="wire_date" type="datetime"/>

		<col name="status" length="6" required="true"/>
		<col name="org_trade_id" type="int"/>
		<col name="cxl_trade_id" type="int"/>
		<col name="rbl_trade_id" type="int"/>
		<col name="reason_id" ref="correctReasons"/>
		<col name="entered" type="datetime" required="true"/>
		<col name="processed" type="datetime"/>
		<col name="cancelled" type="datetime"/>
		<col name="surrendered" type="datetime"/>
		<col name="mergedFromAccount" length="20"/>

		<col name="cust_check" length="18"/>
		<col name="nav" type="char"/>
		<col name="buy_sell" length="8"/>
		<col name="proration_ratio" type="rate"/>
		<col name="skip_license" db_type="smallint"/>
		<col name="trailer_flag" type="bool"/>
		<col name="pay_while_open" type="bool"/>
		<col name="is_part_of_investment_strategy"/>

		<col name="stp_app_id" length="256"/>
		<col name="stp_load_id" type="long"/>
		<col name="comments"/>
		<timestamps/>
	</columns>
	<indexes>
		<index>
			<col ref="batch_id"/>
			<col ref="bank_comm"/>
		</index>
	</indexes>
</table>
